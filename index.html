<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç°ä»£ç”µå•†SKUè®¡ç®—å™¨</title>
    <link href="https://fonts.googleapis.com/css2?family=inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* é…è‰²æ–¹æ¡ˆ */
            --primary-color: #2563eb; /* ç°ä»£è“ */
            --primary-hover: #1d4ed8;
            --accent-color: #f59e0b; /* æš–æ©™è‰²ç”¨äºå¼ºè°ƒ/æ±‡æ€» */
            --accent-bg: #fffbeb; /* æµ…æ©™è‰²èƒŒæ™¯ */
            --text-dark: #1f2937;
            --text-medium: #4b5563;
            --text-light: #9ca3af;
            --bg-body: #f3f4f6; /* æ•´ä½“æµ…ç°èƒŒæ™¯ */
            --bg-card: #ffffff; /* å¡ç‰‡ç™½è‰²èƒŒæ™¯ */
            
            /* åœ†è§’å’Œé˜´å½±å˜é‡ */
            --radius-lg: 16px; /* å¤§å¡ç‰‡åœ†è§’ */
            --radius-md: 10px; /* è¾“å…¥æ¡†å’Œå°åŒºå—åœ†è§’ */
            --radius-sm: 6px;  /* å°æŒ‰é’®åœ†è§’ */
            --shadow-card: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-body);
            margin: 0;
            padding: 25px;
            color: var(--text-dark);
        }

        h2, h3 {
            color: var(--text-dark);
            font-weight: 700;
            margin-top: 0;
            margin-bottom: 15px;
        }

        /* é€šç”¨å¡ç‰‡æ ·å¼ */
        .card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-card);
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid rgba(0,0,0,0.05);
        }

        /* å¸ƒå±€å®¹å™¨ */
        .container-grid {
            display: grid;
            grid-template-columns: 7fr 3fr; /* å·¦7å³3 */
            gap: 25px;
            max-width: 1400px;
            margin: 0 auto;
        }

        @media (max-width: 1000px) {
            .container-grid { grid-template-columns: 1fr; }
        }

        /* --- ç°ä»£è¾“å…¥æ¡†æ ·å¼ --- */
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e5e7eb;
            background-color: #f9fafb;
            border-radius: var(--radius-md);
            font-family: inherit;
            font-size: 14px;
            color: var(--text-dark);
            transition: all 0.2s ease;
            box-sizing: border-box; /* é‡è¦ï¼šé˜²æ­¢paddingæ’‘ç ´å®½åº¦ */
        }

        input:focus {
            outline: none;
            border-color: var(--primary-color);
            background-color: #fff;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        /* é’ˆå¯¹è¡¨æ ¼å†…çš„è¾“å…¥æ¡†å¾®è°ƒ */
        td input[type="text"], td input[type="number"] {
            text-align: center;
            padding: 8px;
        }

        /* --- ç°ä»£æŒ‰é’®æ ·å¼ --- */
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 30px; /* èƒ¶å›ŠçŠ¶æŒ‰é’® */
            box-shadow: var(--shadow-sm);
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        button:hover {
            background-color: var(--primary-hover);
            transform: translateY(-1px);
        }
        
        button:active {
             transform: translateY(1px);
        }

        button.delete-btn {
            background-color: #fee2e2; /* æµ…çº¢èƒŒæ™¯ */
            color: #ef4444; /* çº¢è‰²æ–‡å­— */
            padding: 6px 12px;
            font-size: 12px;
            border-radius: var(--radius-sm);
            box-shadow: none;
        }
        button.delete-btn:hover {
            background-color: #fecaca;
        }

        /* --- SKU ç®¡ç†åŒºåŸŸ --- */
        .sku-manager-header {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .sku-inputs {
            display: flex;
            gap: 10px;
            flex-grow: 1;
        }

        /* --- è¡¨æ ¼æ ·å¼ä¼˜åŒ– --- */
        .table-container {
            overflow-x: auto;
            border-radius: var(--radius-lg); /* è¡¨æ ¼å®¹å™¨åœ†è§’ */
            box-shadow: var(--shadow-sm);
        }

        table {
            width: 100%;
            border-collapse: separate; /* ä½¿ç”¨ separate ä»¥å®ç°åœ†è§’ */
            border-spacing: 0;
            background: white;
        }

        th {
            background-color: #f8fafc;
            color: var(--text-medium);
            font-weight: 600;
            padding: 12px;
            text-align: center;
            border-bottom: 2px solid #e5e7eb;
        }

        td {
            padding: 10px;
            text-align: center;
            border-bottom: 1px solid #f3f4f6;
            vertical-align: middle;
        }

        /* è¡¨æ ¼è¡Œ Hover æ•ˆæœ */
        tbody tr:hover td {
            background-color: #f9fafb;
        }

        /* æ±‡æ€»è¡Œæ ·å¼ */
        tfoot .total-row td {
            background-color: var(--accent-bg); /* æµ…æ©™è‰²èƒŒæ™¯ */
            color: var(--accent-color);
            font-weight: 700;
            border-top: 2px solid var(--accent-color);
            font-size: 1.1em;
        }
        
        /* æ±‡æ€»è¡Œè¾“å…¥æ¡†ç‰¹æ®Šå¤„ç† */
        .total-row input {
            background-color: transparent !important;
            font-weight: bold;
            border: none !important;
            box-shadow: none !important;
            color: var(--accent-color) !important;
            font-size: 1.1em;
            text-align: center;
        }

        /* --- åŒ…è£…è®¡ç®—åŒºåŸŸä¼˜åŒ– --- */
        .package-calc-table th {
            background-color: #eef2ff; /* æµ…è“è¡¨å¤´åŒºåˆ† */
            color: var(--primary-color);
            border-bottom: 1px solid #dbeafe;
        }
        
        .red-text-input {
            color: #dc2626 !important; /* é²œè‰³çš„çº¢è‰² */
            font-weight: 600;
            background-color: #fef2f2 !important; /* æµ…çº¢èƒŒæ™¯å¼ºè°ƒè¾“å…¥ */
        }
        
        .result-cell {
            font-weight: 700;
            color: var(--text-dark);
            background-color: #f3f4f6;
            border-radius: var(--radius-md);
            padding: 8px;
            display: inline-block;
            min-width: 60px;
        }
        
        .highlight-result {
             color: var(--primary-color);
             font-size: 1.1em;
        }


        /* --- å³ä¾§è½¬æ¢å™¨æ ·å¼ --- */
        .sidebar h3 {
            padding-bottom: 10px;
            border-bottom: 2px solid #f3f4f6;
        }

        .converter-group {
            background-color: #f9fafb;
            border-radius: var(--radius-md);
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #e5e7eb;
        }
        
        .converter-header {
            font-weight: 600;
            color: var(--text-medium);
            margin-bottom: 10px;
            display: block;
            text-align: center;
        }

        .conv-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            gap: 10px;
        }

        .conv-row span {
            color: var(--text-light);
            font-weight: bold;
            font-size: 18px;
        }
        
        .ratio-box {
            background-color: var(--accent-bg);
            border-color: var(--accent-color);
        }
        .ratio-box .converter-header {
            color: var(--accent-color);
        }

        /* è¾…åŠ©å·¥å…·ç±» */
        .mt-20 { margin-top: 20px; }
        .w-full { width: 100%; }

    </style>
</head>
<body>

    <div class="card sku-manager">
        <div class="sku-manager-header">
            <h3 style="margin:0; min-width: 120px;">ğŸ·ï¸ SKU è®°å¿†</h3>
            <div class="sku-inputs">
                <input type="text" id="newSkuName" placeholder="SKUåç§° (å¦‚: A001)" style="flex: 2;">
                <input type="number" id="newSkuPrice" placeholder="å•ä»·" style="flex: 1;">
                <input type="number" id="newSkuWeight" placeholder="å•ä¸ªé‡é‡" style="flex: 1;">
            </div>
            <button onclick="saveSKU()">ä¿å­˜SKU</button>
            <span id="saveMsg" style="color: var(--accent-color); font-weight: 600; font-size: 14px;"></span>
        </div>
    </div>

    <div class="container-grid">
        <div class="main-content">
            
            <div class="card">
                <h3>ğŸ§¾ è®¢å•æ±‡æ€»è¡¨</h3>
                <div class="table-container">
                    <table id="mainTable">
                        <thead>
                            <tr>
                                <th style="width: 60px;">åºå·</th>
                                <th style="text-align: left; padding-left: 20px;">åç§°/SKU (è¾“å…¥è‡ªåŠ¨è°ƒç”¨)</th>
                                <th style="width: 100px;">å•ä»·</th>
                                <th style="width: 100px;">æ•°é‡</th>
                                <th style="width: 110px;">é‡é‡ (å•ä¸ª)</th>
                                <th style="width: 120px;">æ€»ä»·</th>
                                <th style="width: 70px;">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            </tbody>
                        <tfoot>
                            <tr class="total-row">
                                <td colspan="2" style="text-align: right; padding-right: 20px;">æ±‡æ€»ç»Ÿè®¡</td>
                                <td id="totalAvgPrice">-</td>
                                <td><input type="text" id="totalQty" value="0" readonly></td>
                                <td><input type="text" id="totalWeight" value="0" readonly></td>
                                <td><input type="text" id="grandTotal" value="0.00" readonly></td>
                                <td></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <button class="mt-20 w-full" onclick="addRow()">+ æ·»åŠ ä¸€è¡Œ</button>
            </div>

            <div class="card">
                <h3>ğŸ“¦ åŒ…è£…å°ºå¯¸ä¸ä½“ç§¯é‡è®¡ç®—</h3>
                <div class="table-container" style="box-shadow: none; border: 1px solid #e5e7eb;">
                    <table class="package-calc-table">
                        <thead>
                            <tr>
                                <th style="text-align: left;">é¡¹ç›®</th>
                                <th>é•¿ (cm)</th>
                                <th>å®½ (cm)</th>
                                <th>é«˜ (cm)</th>
                                <th>æ€»ä¸ªæ•°</th>
                                <th>å•ä»·</th>
                                <th>æ€»ä»·</th>
                                <th>æ€»é‡é‡</th>
                                <th>ä½“ç§¯é‡</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="text-align: left; font-weight: 600;">å•ä¸ªå°ºå¯¸</td>
                                <td><input type="number" id="pL" value="13" oninput="calcPackage()"></td>
                                <td><input type="number" id="pW" value="10" oninput="calcPackage()"></td>
                                <td><input type="number" id="pH" value="3" oninput="calcPackage()"></td>
                                <td rowspan="4" style="vertical-align: middle;"><span class="result-cell highlight-result" id="pTotalCount">0</span></td>
                                <td rowspan="4" style="vertical-align: middle;"><input type="number" id="pUnitPrice" placeholder="å•ä»·" oninput="calcPackage()"></td>
                                <td rowspan="4" style="vertical-align: middle;"><span class="result-cell highlight-result" id="pTotalPrice">0.00</span></td>
                                <td rowspan="4" style="vertical-align: middle;"><span class="result-cell" id="pRealWeight">0</span></td>
                                <td rowspan="4" style="vertical-align: middle;"><span class="result-cell" id="pVolWeight">0</span></td>
                            </tr>
                            <tr>
                                <td style="text-align: left; font-weight: 600; color: var(--text-medium);">å åŠ æ•°é‡ (è¾“å…¥)</td>
                                <td><input type="number" id="qL" value="2" class="red-text-input" oninput="calcPackage()"></td>
                                <td><input type="number" id="qW" value="3" class="red-text-input" oninput="calcPackage()"></td>
                                <td><input type="number" id="qH" value="4" class="red-text-input" oninput="calcPackage()"></td>
                            </tr>
                            <tr style="background-color: #f8fafc;">
                                <td style="text-align: left; font-weight: 600;">æœ€ç»ˆåŒ…è£…å°ºå¯¸</td>
                                <td><span class="result-cell" id="resL">0</span></td>
                                <td><span class="result-cell" id="resW">0</span></td>
                                <td><span class="result-cell" id="resH">0</span></td>
                            </tr>
                             <tr>
                                <td style="text-align: left; font-weight: 600; color: var(--text-medium);">å•ä¸ªé‡é‡ (è¾“å…¥)</td>
                                <td colspan="3" style="text-align: left;"><input type="number" id="pSingleWeight" value="0.028" class="red-text-input" style="width: 100px;" oninput="calcPackage()"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="sidebar">
            <div class="card">
                <h3>ğŸ› ï¸ å¸¸ç”¨è½¬æ¢å·¥å…·</h3>

                <div class="converter-group">
                    <span class="converter-header">ğŸ“ å°ºå¯¸è½¬æ¢</span>
                    <div class="conv-row">
                        <input type="number" id="cmVal" oninput="convertLen('cm')" placeholder="å˜ç±³ (cm)">
                        <span>â‡‹</span>
                        <input type="number" id="inchVal" oninput="convertLen('inch')" placeholder="è‹±å¯¸ (inch)">
                    </div>
                     <div class="conv-row">
                        <input type="number" id="ftVal" oninput="convertLen('ft')" placeholder="è‹±å°º (ft)">
                        <span>â‡‹</span>
                        <input type="number" id="mVal" oninput="convertLen('m')" placeholder="ç±³ (m)">
                    </div>
                </div>

                <div class="converter-group">
                    <span class="converter-header">âš–ï¸ é‡é‡è½¬æ¢</span>
                    <div class="conv-row">
                        <input type="number" id="lbVal" oninput="convertWeight('lb')" placeholder="ç£… (lb)">
                        <span>â‡‹</span>
                        <input type="number" id="gVal" oninput="convertWeight('g')" placeholder="å…‹ (g)">
                    </div>
                    <div class="conv-row">
                        <input type="number" id="ozVal" oninput="convertWeight('oz')" placeholder="ç›å¸ (oz)">
                        <span>â‡‹</span>
                        <input type="number" id="ozgVal" oninput="convertWeight('ozg')" placeholder="å…‹ (g)">
                    </div>
                </div>

                 <div class="converter-group">
                    <span class="converter-header">ğŸ’§ æ¶²ä½“å®¹é‡</span>
                    <div class="conv-row">
                        <input type="number" id="flozVal" oninput="convertLiquid('floz')" placeholder="æ¶²ç›å¸ (fl oz)">
                        <span>â‡‹</span>
                        <input type="number" id="mlVal" oninput="convertLiquid('ml')" placeholder="æ¯«å‡ (ml)">
                    </div>
                </div>

                <div class="converter-group ratio-box">
                    <span class="converter-header">â— ç®€æ˜“é™¤æ³• / æ€§ä»·æ¯”</span>
                    <div class="conv-row">
                        <input type="number" id="calcPrice" placeholder="æ€»ä»·" oninput="calcRatio()" style="background: white;">
                        <span style="color: var(--accent-color)">/</span>
                        <input type="number" id="calcQty" placeholder="ä¸ªæ•°" oninput="calcRatio()" style="background: white;">
                    </div>
                    <div style="text-align: center; margin-top:10px; font-weight: bold; color: var(--accent-color);">
                        ç»“æœ(å•ä»·): <span id="calcResult" style="font-size: 1.4em;">0</span>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <datalist id="skuList"></datalist>

    <script>
        // --- SKU è®°å¿†åŠŸèƒ½ ---
        function getSavedSKUs() {
            const stored = localStorage.getItem('mySkuData');
            return stored ? JSON.parse(stored) : {};
        }

        function saveSKU() {
            const name = document.getElementById('newSkuName').value.trim();
            const price = document.getElementById('newSkuPrice').value;
            const weight = document.getElementById('newSkuWeight').value;

            if (!name) return alert('è¯·è¾“å…¥SKUåç§°');

            const skus = getSavedSKUs();
            skus[name] = { price: price, weight: weight };
            localStorage.setItem('mySkuData', JSON.stringify(skus));
            
            updateDatalist();
            
            const msg = document.getElementById('saveMsg');
            msg.innerText = "âœ¨ å·²ä¿å­˜!";
            setTimeout(() => msg.innerText = "", 2000);
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById('newSkuName').value = '';
            document.getElementById('newSkuPrice').value = '';
            document.getElementById('newSkuWeight').value = '';
        }

        function updateDatalist() {
            const skus = getSavedSKUs();
            const datalist = document.getElementById('skuList');
            datalist.innerHTML = '';
            for (let name in skus) {
                const opt = document.createElement('option');
                opt.value = name;
                datalist.appendChild(opt);
            }
        }

        // --- ä¸»è¡¨æ ¼é€»è¾‘ ---
        function addRow() {
            const tbody = document.getElementById('tableBody');
            const rowCount = tbody.rows.length + 1;
            const tr = document.createElement('tr');
            
            tr.innerHTML = `
                <td>${rowCount}</td>
                <td style="text-align: left;"><input type="text" list="skuList" onchange="fillSkuData(this)" placeholder="è¾“å…¥æˆ–é€‰æ‹©SKU" style="text-align: left;"></td>
                <td><input type="number" class="price" oninput="calcMainTable()" step="0.01" placeholder="0.00"></td>
                <td><input type="number" class="qty" oninput="calcMainTable()" placeholder="0"></td>
                <td><input type="number" class="weight" oninput="calcMainTable()" step="0.001" placeholder="0.000"></td>
                <td><input type="text" class="total" value="0.00" readonly style="font-weight: bold; background: #f3f4f6; border:none;"></td>
                <td><button class="delete-btn" onclick="deleteRow(this)">åˆ é™¤</button></td>
            `;
            tbody.appendChild(tr);
            // æ–°è¡Œæ·»åŠ åè‡ªåŠ¨èšç„¦åˆ°SKUè¾“å…¥æ¡†
            tr.querySelector('input[list="skuList"]').focus();
        }

        function deleteRow(btn) {
            btn.closest('tr').remove();
            calcMainTable();
            // é‡ç½®åºå·
            const rows = document.getElementById('tableBody').rows;
            for(let i=0; i<rows.length; i++) {
                rows[i].cells[0].innerText = i + 1;
            }
        }

        function fillSkuData(input) {
            const name = input.value;
            const skus = getSavedSKUs();
            if (skus[name]) {
                const row = input.closest('tr');
                row.querySelector('.price').value = skus[name].price;
                row.querySelector('.weight').value = skus[name].weight;
                // èšç„¦åˆ°æ•°é‡è¾“å…¥æ¡†ï¼Œæ–¹ä¾¿æ¥ç€è¾“å…¥
                row.querySelector('.qty').focus();
                calcMainTable();
            }
        }

        function calcMainTable() {
            const rows = document.querySelectorAll('#tableBody tr');
            let sumTotal = 0;
            let sumQty = 0;
            let sumWeight = 0;

            rows.forEach(row => {
                const price = parseFloat(row.querySelector('.price').value) || 0;
                const qty = parseFloat(row.querySelector('.qty').value) || 0;
                const weight = parseFloat(row.querySelector('.weight').value) || 0;

                const lineTotal = price * qty;
                const lineWeight = weight * qty;

                row.querySelector('.total').value = lineTotal.toFixed(2);

                sumTotal += lineTotal;
                sumQty += qty;
                sumWeight += lineWeight;
            });

            document.getElementById('grandTotal').value = sumTotal.toFixed(2);
            document.getElementById('totalQty').value = sumQty;
            document.getElementById('totalWeight').value = sumWeight.toFixed(3);
        }

        // --- åŒ…è£…è®¡ç®—é€»è¾‘ ---
        function calcPackage() {
            // è¾“å…¥å€¼
            const L = parseFloat(document.getElementById('pL').value) || 0;
            const W = parseFloat(document.getElementById('pW').value) || 0;
            const H = parseFloat(document.getElementById('pH').value) || 0;
            
            const qL = parseFloat(document.getElementById('qL').value) || 1;
            const qW = parseFloat(document.getElementById('qW').value) || 1;
            const qH = parseFloat(document.getElementById('qH').value) || 1;

            const singleWeight = parseFloat(document.getElementById('pSingleWeight').value) || 0;
            const unitPrice = parseFloat(document.getElementById('pUnitPrice').value) || 0;

            // è®¡ç®—ç»“æœ
            const totalCount = qL * qW * qH;
            const packL = L * qL;
            const packW = W * qW;
            const packH = H * qH;

            // ä½“ç§¯é‡ (é»˜è®¤é™¤ä»¥5000)
            const volWeight = (packL * packW * packH) / 5000;
            const realWeight = totalCount * singleWeight;
            const totalPrice = totalCount * unitPrice;

            // æ›´æ–°DOM
            document.getElementById('resL').innerText = packL.toFixed(1);
            document.getElementById('resW').innerText = packW.toFixed(1);
            document.getElementById('resH').innerText = packH.toFixed(1);
            
            document.getElementById('pTotalCount').innerText = totalCount;
            document.getElementById('pVolWeight').innerText = volWeight.toFixed(2);
            document.getElementById('pRealWeight').innerText = realWeight.toFixed(3);
            document.getElementById('pTotalPrice').innerText = totalPrice.toFixed(2);
        }

        // --- è½¬æ¢å·¥å…·é€»è¾‘ ---
        function convertLen(type) {
            if (type === 'cm') {
                let v = parseFloat(document.getElementById('cmVal').value);
                document.getElementById('inchVal').value = (v / 2.54).toFixed(3);
            } else if (type === 'inch') {
                let v = parseFloat(document.getElementById('inchVal').value);
                document.getElementById('cmVal').value = (v * 2.54).toFixed(3);
            } else if (type === 'ft') {
                let v = parseFloat(document.getElementById('ftVal').value);
                document.getElementById('mVal').value = (v * 0.3048).toFixed(3);
            } else if (type === 'm') {
                let v = parseFloat(document.getElementById('mVal').value);
                document.getElementById('ftVal').value = (v / 0.3048).toFixed(3);
            }
        }

        function convertWeight(type) {
            if (type === 'lb') {
                let v = parseFloat(document.getElementById('lbVal').value);
                document.getElementById('gVal').value = (v * 453.592).toFixed(1);
            } else if (type === 'g') {
                let v = parseFloat(document.getElementById('gVal').value);
                document.getElementById('lbVal').value = (v / 453.592).toFixed(4);
            } else if (type === 'oz') {
                let v = parseFloat(document.getElementById('ozVal').value);
                document.getElementById('ozgVal').value = (v * 28.3495).toFixed(2);
            } else if (type === 'ozg') {
                let v = parseFloat(document.getElementById('ozgVal').value);
                document.getElementById('ozVal').value = (v / 28.3495).toFixed(4);
            }
        }
        
        function convertLiquid(type) {
             if (type === 'floz') {
                let v = parseFloat(document.getElementById('flozVal').value);
                document.getElementById('mlVal').value = (v * 29.5735).toFixed(1);
            } else if (type === 'ml') {
                let v = parseFloat(document.getElementById('mlVal').value);
                document.getElementById('flozVal').value = (v / 29.5735).toFixed(3);
            }
        }

        function calcRatio() {
            const p = parseFloat(document.getElementById('calcPrice').value) || 0;
            const q = parseFloat(document.getElementById('calcQty').value) || 1;
            let res = p / q;
            if (!isFinite(res) || isNaN(res)) res = 0;
            document.getElementById('calcResult').innerText = res.toFixed(4);
        }

        // åˆå§‹åŒ–
        updateDatalist();
        for(let i=0; i<3; i++) addRow(); // é»˜è®¤æ·»åŠ 3è¡Œ
        calcPackage(); // åˆå§‹è®¡ç®—ä¸€æ¬¡åŒ…è£…
    </script>
</body>
</html>